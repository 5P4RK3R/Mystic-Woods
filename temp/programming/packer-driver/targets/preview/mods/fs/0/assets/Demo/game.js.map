{"version":3,"sources":["file:///Users/5p4rk3r/Projects/JS:TS/Cocos/Mystic%20Woods/assets/Demo/game.js"],"names":["audioFlag","attackFlag","game","player","gameWidth","gameHeight","globalMap","enemies_group","loot_group","objects_group","projectiles_group","player_state","PLAYER_STATE","LEFT","RIGHT","UP","DOWN","WALKING_LEFT","WALKING_RIGHT","WALKING_UP","WALKING_DOWN","hurtFlag","exit","kills","window","onload","Phaser","Game","AUTO","state","add","boot","preload","titleScreen","playGame","gameOver","start","prototype","load","image","create","scale","pageAlignHorizontally","pageAlignVertically","scaleMode","ScaleManager","SHOW_ALL","renderer","renderSession","roundPixels","loadingBar","sprite","width","height","anchor","setTo","setPreloadSprite","tilemap","Tilemap","TILED_JSON","atlasJSONArray","audio","background","tileSprite","title","tween","to","y","Easing","Linear","In","yoyo","loop","pressEnter","startKey","input","keyboard","addKey","Keyboard","ENTER","onDown","startGame","time","events","blinkText","credits","title2","destroy","alpha","addAudios","createTileMap","createGroups","createExit","populate","createPlayer","bindKeys","createCamera","createHud","startMusic","attackKey","SPACEBAR","prepareAttack","onUp","releaseAttack","x","physics","arcade","enable","music","play","audioHurt","audioItem","audioEnemyDeath","audioSlash","shoot","hud_1","hud_2","hud_3","fixedToCamera","camera","follow","wasd","left","right","down","up","attack","addKeyCapture","addTilesetImage","layer_collisions","createLayer","layer","layer2","setCollision","resizeWorld","temp","Player","existing","group","enableBody","createMoles","createTreants","findObjectsByType","type","map","result","Array","objects","forEach","element","tileHeight","push","enemies_array","i","length","Mole","properties","vertical","Treant","shot","dir","Arrow","update","collide","overlap","shotImpact","alive","hurtPlayer","lootManager","exitManager","movePlayer","hurtManager","stop","loot","kill","health","updateHealthHud","reset","loadTexture","totalElapsedSeconds","enemy","spawnCoin","spawnEnemyDeath","position","rnd","integerInRange","spawnGem","EnemyDeath","vel","body","velocity","isDown","Gem","Coin","debugGame","debug","forEachAlive","renderGroup","member","initX","initY","Sprite","call","setSize","animVel","animations","Animation","generateFrameNames","attack_front","attack_back","attack_side","onComplete","resetAttackFlag","Object","constructor","verticalMove","speed","bounce","moveCounter","direction","directionsArray","between","move","angle","inWorld","anim"],"mappings":"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","sourcesContent":["/*\n * TINY RPG Forest Demo Code\n * @copyright    2018 Ansimuz\n * @license      {@link https://opensource.org/licenses/MIT | MIT License}\n * Get free assets and code at: www.pixelgameart.org\n * */\n\nvar audioFlag = true;\nvar attackFlag = 0;\nvar game;\nvar player;\nvar gameWidth = 272;\nvar gameHeight = 192;\nvar globalMap;\nvar enemies_group;\nvar loot_group;\nvar objects_group;\nvar projectiles_group;\nvar player_state;\nvar PLAYER_STATE = {\n    LEFT: 0,\n    RIGHT: 1,\n    UP: 2,\n    DOWN: 3,\n    WALKING_LEFT: 4,\n    WALKING_RIGHT: 5,\n    WALKING_UP: 6,\n    WALKING_DOWN: 7\n};\nvar hurtFlag;\nvar exit;\nvar kills = 5;\n\nwindow.onload = function () {\n\n    game = new Phaser.Game(gameWidth, gameHeight, Phaser.AUTO, \"\");\n    game.state.add('Boot', boot);\n    game.state.add('Preload', preload);\n    game.state.add('TitleScreen', titleScreen);\n    game.state.add('PlayGame', playGame);\n    game.state.add('GameOver', gameOver);\n    //\n    game.state.start(\"Boot\");\n}\n\nvar boot = function (game) {\n};\nboot.prototype = {\n    preload: function () {\n        this.game.load.image(\"loading\", \"assets/sprites/loading.png\");\n    },\n    create: function () {\n\n        game.scale.pageAlignHorizontally = true;\n        game.scale.pageAlignVertically = true;\n        game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\n        game.renderer.renderSession.roundPixels = true; // blurring off\n        this.game.state.start(\"Preload\");\n    }\n}\n\nvar preload = function (game) {\n};\npreload.prototype = {\n\n    preload: function () {\n        var loadingBar = this.add.sprite(game.width / 2, game.height / 2, \"loading\");\n        loadingBar.anchor.setTo(0.5);\n        game.load.setPreloadSprite(loadingBar);\n        // load title screen\n        game.load.image(\"title-bg\", \"assets/sprites/title-screen-bg.png\");\n        game.load.image(\"title\", \"assets/sprites/title-screen.png\");\n        game.load.image(\"enter\", \"assets/sprites/press-enter-text.png\");\n        game.load.image(\"credits\", \"assets/sprites/credits-text.png\");\n        game.load.image(\"instructions\", \"assets/sprites/instructions.png\");\n        game.load.image(\"gameover\", \"assets/sprites/game-over.png\");\n\n        // tileset\n        game.load.image(\"tileset\", \"assets/environment/tileset.png\");\n        game.load.image(\"objects\", \"assets/environment/objects.png\");\n        game.load.image(\"collisions\", \"assets/environment/collisions.png\");\n        game.load.tilemap(\"map\", \"assets/maps/map.json\", null, Phaser.Tilemap.TILED_JSON);\n        // atlas\n        game.load.atlasJSONArray(\"atlas\", \"assets/atlas/atlas.png\", \"assets/atlas/atlas.json\");\n        game.load.atlasJSONArray(\"atlas-props\", \"assets/atlas/atlas-props.png\", \"assets/atlas/atlas-props.json\");\n\n        // images\n        game.load.image('exit', 'assets/environment/exit-open.png');\n\n        // audio\n        game.load.audio(\"music\", [\"assets/sound/ancient_path.ogg\", \"assets/sound/ancient_path.mp3\"]);\n        game.load.audio(\"hurt\", [\"assets/sound/hurt.ogg\", \"assets/sound/hurt.mp3\"]);\n        game.load.audio(\"slash\", [\"assets/sound/slash.ogg\", \"assets/sound/slash.mp3\"]);\n        game.load.audio(\"item\", [\"assets/sound/item.ogg\", \"assets/sound/item.mp3\"]);\n        game.load.audio(\"enemy-death\", [\"assets/sound/enemy-death.ogg\", \"assets/sound/enemy-death.mp3\"]);\n\n    },\n    create: function () {\n        //this.game.state.start('PlayGame');\n        this.game.state.start(\"TitleScreen\");\n    }\n\n}\n\nvar titleScreen = function (game) {\n};\ntitleScreen.prototype = {\n    create: function () {\n        background = game.add.tileSprite(0, 0, gameWidth, gameHeight, \"title-bg\");\n        this.title = game.add.image(game.width / 2, 130, \"title\");\n        this.title.anchor.setTo(0.5, 1);\n        var tween = game.add.tween(this.title);\n        tween.to({y: 130 + 10}, 800, Phaser.Easing.Linear.In).yoyo(true).loop();\n\n        tween.start();\n        //\n        this.pressEnter = game.add.image(game.width / 2, game.height - 35, \"enter\");\n        this.pressEnter.anchor.setTo(0.5);\n        //\n        var startKey = game.input.keyboard.addKey(Phaser.Keyboard.ENTER);\n        startKey.onDown.add(this.startGame, this);\n        this.state = 1;\n        //\n        game.time.events.loop(900, this.blinkText, this);\n        //\n        var credits = game.add.image(game.width / 2, game.height - 15, \"credits\");\n        credits.anchor.setTo(0.5);\n    },\n    startGame: function () {\n        if (this.state == 1) {\n            this.state = 2;\n            this.title2 = game.add.image(game.width / 2, game.height / 2, 'instructions');\n            this.title2.anchor.setTo(0.5);\n            this.title.destroy();\n        } else {\n            this.game.state.start('PlayGame');\n        }\n    },\n    blinkText: function () {\n        if (this.pressEnter.alpha) {\n            this.pressEnter.alpha = 0;\n        } else {\n            this.pressEnter.alpha = 1;\n        }\n    }\n}\n\nvar gameOver = function (game) {\n};\ngameOver.prototype = {\n    create: function () {\n        background = game.add.tileSprite(0, 0, gameWidth, gameHeight, \"title-bg\");\n        this.title = game.add.image(game.width / 2, game.height / 2, 'gameover');\n        this.title.anchor.setTo(0.5);\n\n        //\n        this.pressEnter = game.add.image(game.width / 2, game.height - 35, \"enter\");\n        this.pressEnter.anchor.setTo(0.5);\n        //\n        var startKey = game.input.keyboard.addKey(Phaser.Keyboard.ENTER);\n        startKey.onDown.add(this.startGame, this);\n        this.state = 1;\n        //\n        game.time.events.loop(900, this.blinkText, this);\n        //\n        var credits = game.add.image(game.width / 2, game.height - 15, \"credits\");\n        credits.anchor.setTo(0.5);\n    },\n    startGame: function () {\n        this.game.state.start('PlayGame');\n    },\n    blinkText: function () {\n        if (this.pressEnter.alpha) {\n            this.pressEnter.alpha = 0;\n        } else {\n            this.pressEnter.alpha = 1;\n        }\n    }\n}\n\nvar playGame = function (game) {\n};\nplayGame.prototype = {\n    create: function () {\n\n        this.addAudios();\n        this.createTileMap(1);\n        this.createGroups();\n        this.createExit(46, 27);\n        this.populate();\n        this.createPlayer(47, 31);\n\n        this.bindKeys();\n        this.createCamera();\n        this.createHud();\n\n        this.startMusic();\n\n        var attackKey = game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);\n        attackKey.onDown.add(this.prepareAttack, this);\n        attackKey.onUp.add(this.releaseAttack, this);\n\n    },\n\n    createExit: function (x, y) {\n        exit = game.add.sprite(x * 16, y * 16, \"exit\");\n        exit.alpha = 0;\n        game.physics.arcade.enable(exit);\n    },\n\n    startMusic: function () {\n        if (!audioFlag) {\n            return\n        }\n\n        this.music = game.add.audio(\"music\");\n        this.music.loop = true;\n\n        this.music.play();\n\n    },\n\n    addAudios: function () {\n        this.audioHurt = game.add.audio(\"hurt\");\n        this.audioItem = game.add.audio(\"item\");\n        this.audioEnemyDeath = game.add.audio(\"enemy-death\");\n        this.audioSlash = game.add.audio(\"slash\");\n    },\n\n    prepareAttack: function () {\n        if (attackFlag == 0) {\n            attackFlag = 1;\n        }\n    },\n    releaseAttack: function () {\n\n        if (attackFlag == 1) {\n            // reset if not pulled all the way\n            attackFlag = 0;\n\n        }\n\n        if (attackFlag == 2) {\n            attackFlag = 0;\n            this.shoot();\n        }\n\n    },\n    createHud: function () {\n\n        this.hud_1 = game.add.sprite(10, 5, \"atlas\", \"hearts/hearts-1\");\n        this.hud_2 = game.add.sprite(18, 5, \"atlas\", \"hearts/hearts-1\");\n        this.hud_3 = game.add.sprite(26, 5, \"atlas\", \"hearts/hearts-1\");\n        this.hud_1.fixedToCamera = true;\n        this.hud_2.fixedToCamera = true;\n        this.hud_3.fixedToCamera = true;\n\n    },\n\n    createCamera: function () {\n        game.camera.follow(player);\n    },\n    bindKeys: function () {\n        this.wasd = {\n            left: game.input.keyboard.addKey(Phaser.Keyboard.LEFT),\n            right: game.input.keyboard.addKey(Phaser.Keyboard.RIGHT),\n            down: game.input.keyboard.addKey(Phaser.Keyboard.DOWN),\n            up: game.input.keyboard.addKey(Phaser.Keyboard.UP),\n            attack: game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR)\n        }\n        game.input.keyboard.addKeyCapture(\n            [Phaser.Keyboard.SPACEBAR,\n                Phaser.Keyboard.LEFT,\n                Phaser.Keyboard.RIGHT,\n                Phaser.Keyboard.DOWN,\n                Phaser.Keyboard.UP]\n        );\n    },\n\n    createTileMap: function () {\n\n        //tilemap\n        globalMap = game.add.tilemap(\"map\");\n        globalMap.addTilesetImage(\"collisions\");\n        globalMap.addTilesetImage(\"tileset\");\n        globalMap.addTilesetImage(\"objects\");\n\n        this.layer_collisions = globalMap.createLayer(\"Collisions Layer\");\n        this.layer = globalMap.createLayer(\"Tile Layer\");\n        this.layer2 = globalMap.createLayer(\"Tile Layer 2\");\n\n        // collisions\n        globalMap.setCollision([0, 1]);\n\n        this.layer.resizeWorld();\n        this.layer2.resizeWorld();\n        this.layer_collisions.resizeWorld();\n\n        // this.layer_collisions.visible = true;\n        // this.layer_collisions.debug = true;\n        //this.layer.visible = false;\n\n    },\n\n    createPlayer: function (x, y) {\n        var temp = new Player(game, x, y);\n        game.add.existing(temp);\n    },\n\n    createGroups: function () {\n        enemies_group = game.add.group();\n        enemies_group.enableBody = true;\n        //\n        loot_group = game.add.group();\n        loot_group.enableBody = true;\n        //\n        objects_group = game.add.group();\n        objects_group.enableBody = true;\n        //\n        projectiles_group = game.add.group();\n        projectiles_group.enableBody = true;\n    },\n\n    populate: function () {\n\n        // populate enemies from the tiled map from the objects layer\n        this.createMoles();\n        this.createTreants();\n    },\n\n    //find objects in a Tiled layer that containt a property called \"type\" equal to a certain value\n    findObjectsByType: function (type, map, layer) {\n        var result = new Array();\n        map.objects[layer].forEach(function (element) {\n            //console.log(element);\n            if (element.type === type) {\n                //Phaser uses top left, Tiled bottom left so we have to adjust the y position\n                //also keep in mind that the cup images are a bit smaller than the tile which is 16x16\n                //so they might not be placed in the exact pixel position as in Tiled\n                //console.log(\"Found \" + element.type);\n                element.y -= map.tileHeight;\n\n                result.push(element);\n            }\n        });\n        return result;\n    },\n\n    createMoles: function () {\n        var enemies_array = this.findObjectsByType(\"mole\", globalMap, \"Object Layer\");\n        for (var i = 0; i < enemies_array.length; i++) {\n            var sprite = enemies_group.add(new Mole(game, enemies_array[i].x / 16, enemies_array[i].y / 16, enemies_array[i].properties.vertical)); // create prefab\n        }\n    },\n\n    createTreants: function () {\n        var enemies_array = this.findObjectsByType(\"treant\", globalMap, \"Object Layer\");\n        for (var i = 0; i < enemies_array.length; i++) {\n            var sprite = enemies_group.add(new Treant(game, enemies_array[i].x / 16, enemies_array[i].y / 16)); // create prefab\n        }\n    },\n\n    shoot: function () {\n\n        var shot;\n        var dir = \"s\";\n        if (player_state == PLAYER_STATE.WALKING_UP || player_state == PLAYER_STATE.UP) {\n            dir = \"n\";\n            shot = new Arrow(game, player.x, player.y, dir);\n        } else if (player_state == PLAYER_STATE.WALKING_DOWN || player_state == PLAYER_STATE.DOWN) {\n            dir = \"s\";\n            shot = new Arrow(game, player.x, player.y, dir);\n        } else if (player_state == PLAYER_STATE.WALKING_LEFT || player_state == PLAYER_STATE.LEFT) {\n            dir = \"w\";\n            shot = new Arrow(game, player.x, player.y + 4, dir);\n        } else if (player_state == PLAYER_STATE.WALKING_RIGHT || player_state == PLAYER_STATE.RIGHT) {\n            dir = \"e\";\n            shot = new Arrow(game, player.x, player.y + 4, dir);\n        }\n\n        projectiles_group.add(shot);\n        this.audioSlash.play();\n\n    },\n\n    update: function () {\n        // physics\n        game.physics.arcade.collide(player, this.layer_collisions);\n        game.physics.arcade.collide(enemies_group, this.layer_collisions);\n        //\n        game.physics.arcade.overlap(enemies_group, projectiles_group, this.shotImpact, null, this);\n\n        if (player.alive) {\n\n            //overlaps\n            game.physics.arcade.overlap(player, enemies_group, this.hurtPlayer, null, this);\n            game.physics.arcade.overlap(player, loot_group, this.lootManager, null, this);\n\n            // exit game if key is obtained\n            game.physics.arcade.overlap(player, exit, this.exitManager, null, this);\n        }\n\n        this.movePlayer();\n\n        //this.debugGame();\n        this.hurtManager();\n    },\n\n    exitManager: function (player, exit) {\n        if (kills <= 0) {\n            this.game.state.start(\"GameOver\");\n            this.music.stop();\n        }\n\n    },\n\n    lootManager: function (player, loot) {\n\n        if (loot.type == \"gem\") {\n            this.audioItem.play();\n            loot.kill();\n            if (player.health < 3) {\n                player.health++;\n                this.updateHealthHud();\n            }\n\n        }\n        if (loot.type == \"coin\") {\n            this.audioItem.play();\n            loot.kill();\n\n        }\n\n    },\n\n    hurtPlayer: function () {\n\n        if (hurtFlag) {\n            return;\n        }\n        hurtFlag = true;\n        this.game.time.reset();\n\n        player.alpha = 0.5;\n\n        player.health--;\n        this.updateHealthHud();\n\n        this.audioHurt.play();\n        if (player.health < 1) {\n            this.gameOver();\n\n        }\n    },\n\n    gameOver: function () {\n        this.music.stop();\n        this.game.state.start(\"GameOver\");\n    },\n\n    updateHealthHud: function () {\n        switch (player.health) {\n            case 3:\n                this.hud_1.loadTexture(\"atlas\", \"hearts/hearts-1\", false);\n                this.hud_2.loadTexture(\"atlas\", \"hearts/hearts-1\", false);\n                this.hud_3.loadTexture(\"atlas\", \"hearts/hearts-1\", false);\n                break;\n            case 2:\n                this.hud_1.loadTexture(\"atlas\", \"hearts/hearts-1\", false);\n                this.hud_2.loadTexture(\"atlas\", \"hearts/hearts-1\", false);\n                this.hud_3.loadTexture(\"atlas\", \"hearts/hearts-2\", false);\n                break;\n            case 1:\n                this.hud_1.loadTexture(\"atlas\", \"hearts/hearts-1\", false);\n                this.hud_2.loadTexture(\"atlas\", \"hearts/hearts-2\", false);\n                this.hud_3.loadTexture(\"atlas\", \"hearts/hearts-2\", false);\n                break;\n            case 0:\n                this.hud_1.loadTexture(\"atlas\", \"hearts/hearts-2\", false);\n                this.hud_2.loadTexture(\"atlas\", \"hearts/hearts-2\", false);\n                this.hud_3.loadTexture(\"atlas\", \"hearts/hearts-2\", false);\n\n                break;\n        }\n    },\n\n    hurtManager: function () {\n        if (hurtFlag && this.game.time.totalElapsedSeconds() > 2) {\n            hurtFlag = false;\n            player.alpha = 1;\n        }\n    },\n\n    shotImpact: function (enemy, shot) {\n        enemy.kill();\n        shot.destroy();\n        kills--;\n        this.audioEnemyDeath.play();\n        this.spawnCoin(enemy.x / 16, enemy.y / 16);\n        this.spawnEnemyDeath(enemy.position.x, enemy.position.y);\n        // sometimes drop gems or coins\n        if (game.rnd.integerInRange(0, 2) == 0) {\n            if (game.rnd.integerInRange(0, 1) == 0) {\n                this.spawnCoin(enemy.x / 16, enemy.y / 16);\n            } else {\n                this.spawnGem(enemy.x / 16, enemy.y / 16);\n            }\n\n        }\n\n        if (kills <= 0) {\n            exit.alpha = 1;\n        }\n\n    },\n\n    spawnEnemyDeath: function (x, y) {\n        var temp = new EnemyDeath(game, x, y);\n        game.add.existing(temp);\n    },\n\n    movePlayer: function () {\n\n        var vel = 50;\n\n        // attack animations\n        if (attackFlag != 0) {\n            player.body.velocity.x = 0;\n            player.body.velocity.y = 0;\n            return;\n        }\n\n        // capture input\n        if (this.wasd.down.isDown) {\n            player_state = PLAYER_STATE.WALKING_DOWN;\n            player.body.velocity.y = vel;\n            player.body.velocity.x = 0;\n        } else if (this.wasd.up.isDown) {\n            player_state = PLAYER_STATE.WALKING_UP;\n            player.body.velocity.y = -vel;\n            player.body.velocity.x = 0;\n        } else if (this.wasd.left.isDown) {\n            player_state = PLAYER_STATE.WALKING_LEFT;\n            player.body.velocity.x = -vel;\n            player.body.velocity.y = 0;\n        } else if (this.wasd.right.isDown) {\n            player_state = PLAYER_STATE.WALKING_RIGHT;\n            player.body.velocity.x = vel;\n            player.body.velocity.y = 0;\n        } else {\n            player.body.velocity.y = 0;\n            player.body.velocity.x = 0;\n        }\n\n        // idle\n        if (player_state == PLAYER_STATE.WALKING_DOWN && player.body.velocity.y == 0) {\n            player_state = PLAYER_STATE.DOWN;\n        } else if (player_state == PLAYER_STATE.WALKING_UP && player.body.velocity.y == 0) {\n            player_state = PLAYER_STATE.UP;\n        } else if (player_state == PLAYER_STATE.WALKING_LEFT && player.body.velocity.x == 0) {\n            player_state = PLAYER_STATE.LEFT;\n        } else if (player_state == PLAYER_STATE.WALKING_RIGHT && player.body.velocity.x == 0) {\n            player_state = PLAYER_STATE.RIGHT;\n        }\n\n    },\n\n    spawnGem: function (x, y) {\n        var temp = new Gem(game, x, y);\n        game.add.existing(temp);\n        loot_group.add(temp);\n    },\n\n    spawnCoin: function (x, y) {\n        var temp = new Coin(game, x, y);\n        game.add.existing(temp);\n        loot_group.add(temp);\n    },\n\n    debugGame: function () {\n        // return;\n        //game.debug.spriteInfo(this.player, 30, 30);\n\n        game.debug.body(player);\n        enemies_group.forEachAlive(this.renderGroup, this);\n        projectiles_group.forEachAlive(this.renderGroup, this);\n        loot_group.forEachAlive(this.renderGroup, this);\n\n    },\n    renderGroup: function (member) {\n        game.debug.body(member);\n    }\n\n}\n\n// entities\n\n// player\n\nPlayer = function (game, x, y) {\n    x *= 16;\n    y *= 16;\n    this.initX = x;\n    this.initY = y;\n    this.health = 3;\n    Phaser.Sprite.call(this, game, x, y, \"atlas\", \"idle/hero-idle-back/hero-idle-back\");\n    this.anchor.setTo(0.5);\n    game.physics.arcade.enable(this);\n    this.body.setSize(6, 10, 13, 20);\n    //add animations\n    var animVel = 12;\n    this.animations.add('idle-front', ['idle/hero-idle-front/hero-idle-front'], 0, true);\n    this.animations.add('idle-back', ['idle/hero-idle-back/hero-idle-back'], 0, true);\n    this.animations.add('idle-side', ['idle/hero-idle-side/hero-idle-side'], 0, true);\n    //\n    this.animations.add('walk-front', Phaser.Animation.generateFrameNames('walk/hero-walk-front/hero-walk-front-', 1, 6, '', 0), animVel, true);\n    this.animations.add('walk-back', Phaser.Animation.generateFrameNames('walk/hero-walk-back/hero-walk-back-', 1, 6, '', 0), animVel, true);\n    this.animations.add('walk-side', Phaser.Animation.generateFrameNames('walk/hero-walk-side/hero-walk-side-', 1, 6, '', 0), animVel, true);\n    //\n    var attack_front = this.animations.add('attack-front', Phaser.Animation.generateFrameNames('attack-weapon/hero-attack-front/hero-attack-front-weapon-', 1, 3, '', 0), animVel, false);\n    var attack_back = this.animations.add('attack-back', Phaser.Animation.generateFrameNames('attack-weapon/hero-attack-back/hero-attack-back-weapon-', 1, 3, '', 0), animVel, false);\n    var attack_side = this.animations.add('attack-side', Phaser.Animation.generateFrameNames('attack-weapon/hero-attack-side/hero-attack-side-weapon-', 1, 3, '', 0), animVel, false);\n    // set flag to false on complete\n    attack_front.onComplete.add(resetAttackFlag, this);\n    attack_back.onComplete.add(resetAttackFlag, this);\n    attack_side.onComplete.add(resetAttackFlag, this);\n\n    function resetAttackFlag() {\n        attackFlag = 2;\n    }\n\n    this.animations.play(\"coin\");\n    this.type = \"player\";\n    player = this;\n\n}\nPlayer.prototype = Object.create(Phaser.Sprite.prototype);\nPlayer.prototype.constructor = Player;\nPlayer.prototype.update = function () {\n\n    // player attack animation\n    if (attackFlag == 2) {\n        return;\n    }\n\n    // player attack animation\n    if (attackFlag == 1) {\n\n        if (player_state == PLAYER_STATE.WALKING_DOWN || player_state == PLAYER_STATE.DOWN) {\n            this.animations.play(\"attack-front\");\n        } else if (player_state == PLAYER_STATE.WALKING_UP || player_state == PLAYER_STATE.UP) {\n            this.animations.play(\"attack-back\");\n        } else if (player_state == PLAYER_STATE.WALKING_LEFT || player_state == PLAYER_STATE.LEFT) {\n            this.animations.play(\"attack-side\");\n        } else if (player_state == PLAYER_STATE.WALKING_RIGHT || player_state == PLAYER_STATE.RIGHT) {\n            this.animations.play(\"attack-side\");\n        }\n        return;\n    }\n\n    // player walk animation\n    if (player_state == PLAYER_STATE.WALKING_DOWN) {\n        this.animations.play(\"walk-front\");\n        this.scale.x = 1;\n    } else if (player_state == PLAYER_STATE.WALKING_UP) {\n        this.animations.play(\"walk-back\");\n        this.scale.x = 1;\n    } else if (player_state == PLAYER_STATE.WALKING_LEFT) {\n        this.animations.play(\"walk-side\");\n        this.scale.x = -1;\n    } else if (player_state == PLAYER_STATE.WALKING_RIGHT) {\n        this.animations.play(\"walk-side\");\n        this.scale.x = 1;\n    } else if (player_state == PLAYER_STATE.DOWN) {\n        this.animations.play(\"idle-front\");\n        this.scale.x = 1;\n    } else if (player_state == PLAYER_STATE.UP) {\n        this.animations.play(\"idle-back\");\n        this.scale.x = 1;\n    } else if (player_state == PLAYER_STATE.LEFT) {\n        this.animations.play(\"idle-side\");\n    } else if (player_state == PLAYER_STATE.RIGHT) {\n        this.animations.play(\"idle-side\");\n    }\n}\n\n// Mole\n\nMole = function (game, x, y, verticalMove) {\n    x *= 16;\n    y *= 16;\n    var vel = 8;\n    Phaser.Sprite.call(this, game, x, y, \"atlas\", \"idle/mole-idle-front\");\n    this.animations.add('walk-front', Phaser.Animation.generateFrameNames('walk/mole-walk-front/mole-walk-front-', 1, 4, '', 0), vel, true);\n    this.animations.add('walk-back', Phaser.Animation.generateFrameNames('walk/mole-walk-back/mole-walk-back-', 1, 4, '', 0), vel, true);\n    this.animations.add('walk-side', Phaser.Animation.generateFrameNames('walk/mole-walk-side/mole-walk-side-', 1, 4, '', 0), vel, true);\n    this.animations.play(\"walk-front\");\n    this.anchor.setTo(0.5);\n    game.physics.arcade.enable(this);\n    this.body.setSize(10, 10, 7, 12);\n    this.speed = 60;\n    if (verticalMove) {\n        this.body.velocity.y = this.speed;\n    } else {\n        this.body.velocity.x = this.speed;\n    }\n    this.body.bounce.x = 1;\n    this.body.bounce.y = 1;\n    this.type = \"mole\";\n\n}\nMole.prototype = Object.create(Phaser.Sprite.prototype);\nMole.prototype.constructor = Mole;\nMole.prototype.update = function () {\n    if (this.body.velocity.y > 0) {\n        this.animations.play(\"walk-front\");\n    } else if (this.body.velocity.y < 0) {\n        this.animations.play(\"walk-back\");\n    } else if (this.body.velocity.y == 0) {\n        this.animations.play(\"walk-side\");\n        if (this.body.velocity.x > 0) {\n            this.scale.x = 1;\n        } else {\n            this.scale.x = -1;\n        }\n\n    }\n}\n\n// Treant\n\nTreant = function (game, x, y) {\n    x *= 16;\n    y *= 16;\n    var vel = 8;\n    Phaser.Sprite.call(this, game, x, y, \"atlas\", \"idle/treant-idle-front\");\n    this.animations.add('walk-front', Phaser.Animation.generateFrameNames('walk/treant-walk-front/treant-walk-front-', 1, 4, '', 0), vel, true);\n    this.animations.add('walk-back', Phaser.Animation.generateFrameNames('walk/treant-walk-back/treant-walk-back-', 1, 4, '', 0), vel, true);\n    this.animations.add('walk-side', Phaser.Animation.generateFrameNames('walk/treant-walk-side/treant-walk-side-', 1, 4, '', 0), vel, true);\n    this.animations.play(\"walk-front\");\n    this.anchor.setTo(0.5);\n    game.physics.arcade.enable(this);\n    this.body.setSize(11, 12, 10, 20);\n    this.speed = 40;\n    this.moveCounter = 0;\n    this.direction = \"up\";\n    this.directionsArray = [\"up\", \"down\", \"left\", \"right\"];\n    this.type = \"treant\";\n\n}\nTreant.prototype = Object.create(Phaser.Sprite.prototype);\nTreant.prototype.constructor = Treant;\nTreant.prototype.update = function () {\n    this.moveCounter++;\n    // move around\n    if (this.moveCounter == 50) {\n        this.direction = this.directionsArray[game.rnd.between(0, this.directionsArray.length - 1)];\n    } else if (this.moveCounter > 50) {\n        this.move();\n    }\n\n    if (this.moveCounter > 70) {\n        this.moveCounter = 0;\n        this.body.velocity.x = 0;\n        this.body.velocity.y = 0;\n    }\n}\nTreant.prototype.move = function () {\n    if (this.direction == \"left\") {\n        this.body.velocity.x = -this.speed;\n        this.animations.play(\"walk-side\");\n        this.scale.x = -1;\n\n    } else if (this.direction == \"right\") {\n        this.body.velocity.x = this.speed;\n        this.animations.play(\"walk-side\");\n        this.scale.x = 1;\n    }\n    if (this.direction == \"up\") {\n        this.body.velocity.y = -this.speed;\n        this.animations.play(\"walk-back\");\n    }\n    if (this.direction == \"down\") {\n        this.body.velocity.y = this.speed;\n        this.animations.play(\"walk-front\");\n    }\n\n}\n\n// arrow\n\nArrow = function (game, x, y, dir) {\n\n    Phaser.Sprite.call(this, game, x, y, \"atlas\", \"arrow\");\n    this.anchor.setTo(0.5);\n    game.physics.arcade.enable(this);\n    this.body.setSize(5, 8, 0, 7);\n    var vel = 270;\n    switch (dir) {\n        case   'n':\n            this.body.velocity.y = -vel;\n            break;\n        case   's':\n            this.body.velocity.y = vel;\n            this.scale.y = -1;\n            break;\n        case   'e':\n            this.body.velocity.x = vel;\n            this.angle = 90;\n            break;\n        case   'w':\n            this.body.velocity.x = -vel;\n            this.angle = 270;\n            break;\n\n    }\n\n}\nArrow.prototype = Object.create(Phaser.Sprite.prototype);\nArrow.prototype.constructor = Arrow;\nArrow.prototype.update = function () {\n    if (!this.inWorld) {\n        this.destroy();\n    }\n}\n\n// enemy death\n\nEnemyDeath = function (game, x, y) {\n    Phaser.Sprite.call(this, game, x, y, \"atlas\", \"enemy-death/enemy-death-1\");\n    this.anchor.setTo(0.5);\n    var anim = this.animations.add(\"death\", Phaser.Animation.generateFrameNames(\"enemy-death/enemy-death-\", 1, 6, '', 0), 18, false);\n    this.animations.play(\"death\");\n    anim.onComplete.add(function () {\n            this.kill();\n        }, this\n    );\n}\n\nEnemyDeath.prototype = Object.create(Phaser.Sprite.prototype);\nEnemyDeath.prototype.constructor = EnemyDeath;\n\n// Gem\n\nGem = function (game, x, y) {\n    x *= 16;\n    y *= 16;\n    Phaser.Sprite.call(this, game, x, y, \"atlas\", \"gem/gem-1\");\n    this.animations.add(\"gem\", Phaser.Animation.generateFrameNames(\"gem/gem-\", 1, 4, '', 0), 10, true);\n    this.anchor.setTo(0.5);\n    game.physics.arcade.enable(this);\n    this.animations.play(\"gem\");\n    this.type = \"gem\";\n}\nGem.prototype = Object.create(Phaser.Sprite.prototype);\nGem.prototype.constructor = Gem;\n\n// COIN\n\nCoin = function (game, x, y) {\n    x *= 16;\n    y *= 16;\n    Phaser.Sprite.call(this, game, x, y, \"atlas\", \"coin/coin-1\");\n    this.animations.add(\"coin\", Phaser.Animation.generateFrameNames(\"coin/coin-\", 1, 4, '', 0), 10, true);\n    this.anchor.setTo(0.5);\n    game.physics.arcade.enable(this);\n    this.animations.play(\"coin\");\n    this.type = \"coin\";\n}\nCoin.prototype = Object.create(Phaser.Sprite.prototype);\nCoin.prototype.constructor = Coin;"]}